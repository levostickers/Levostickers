<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>levostickers - Ù…ØªØ¬Ø± Ø§Ù„Ù…Ù„ØµÙ‚Ø§Øª</title>

<style>
body{font-family:Arial;margin:0}
header{background:#333;color:#fff;text-align:center;padding:1rem;position:relative}
#cart-icon{position:absolute;top:10px;right:10px;font-size:2rem;cursor:pointer}
#cart-count{background:red;color:#fff;border-radius:50%;padding:2px 6px;font-size:12px;position:absolute;top:-5px;right:-10px}
nav{background:#444;text-align:center;padding:10px}
nav a{color:#fff;margin:0 10px;text-decoration:none}
.product{width:30%;margin:1%;display:inline-block;box-shadow:0 0 10px #ccc;padding:10px;text-align:center}
.out-of-stock{opacity:.5;pointer-events:none}
button{padding:6px 12px;border:none;cursor:pointer;color:#fff;background:#333}
.add-to-cart{background:#28a745}
.remove-btn{background:#dc3545}
.delete-btn{background:red}
#cart{display:none;position:fixed;top:0;right:0;width:300px;height:100%;background:#fff;box-shadow:-2px 0 10px #aaa;padding:10px;overflow-y:auto}
.close-btn{background:#666;position:absolute;top:10px;left:10px}
#checkout-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);justify-content:center;align-items:center}
#checkout-modal>div{background:#fff;padding:20px;width:90%;max-width:500px}
#checkout-modal input,#checkout-modal textarea{width:100%;margin:5px 0;padding:8px}
#admin-section{display:none;padding:20px}
.admin-sticker{display:flex;justify-content:space-between;align-items:center;box-shadow:0 0 10px #ccc;margin:10px 0;padding:10px}
</style>
</head>

<body>

<header>
<h1>levostickers</h1>
<div id="cart-icon" onclick="toggleCart()">ğŸ›’ <span id="cart-count">0</span></div>
</header>

<nav>
<a href="#products">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
<a href="#" id="admin-link">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</a>
</nav>

<div id="cart">
<button class="close-btn" onclick="toggleCart()">Ã—</button>
<h3>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
<div id="cart-items"></div>
<p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cart-total">0</span> Ø¬Ù†ÙŠÙ‡</p>
<button onclick="openCheckout()">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
</div>

<section id="products">
<h2>Ù…Ù„ØµÙ‚Ø§ØªÙ†Ø§</h2>
<div id="product-list"></div>
</section>

<!-- Ù†Ø§ÙØ°Ø© Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ -->
<div id="checkout-modal">
  <div>
    <h3>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h3>
    <input id="customer-name" placeholder="Ø§Ù„Ø§Ø³Ù… ÙƒØ§Ù…Ù„" required>
    <input id="customer-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" required>
    <textarea id="customer-note" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
    <button onclick="sendOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    <button class="remove-btn" onclick="closeCheckout()">Ø¥Ù„ØºØ§Ø¡</button>
  </div>
</div>

<section id="admin-section">
<h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
<form id="sticker-form">
<input type="password" id="admin-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
<input id="image-url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©" required>
<input id="sticker-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù„ØµÙ‚" required>
<input type="number" id="sticker-price" placeholder="Ø§Ù„Ø³Ø¹Ø±" required>
<input type="number" id="sticker-quantity" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©" required>
<button type="submit">Ø¥Ø¶Ø§ÙØ©</button>
</form>
<div id="admin-sticker-list"></div>
</section>

<script>
const defaultStickers=[
{image:"https://kyleeandco.nz/cdn/shop/products/image_8ce74649-2379-499c-9e90-67b9c2ef37ba.png?v=1664252982&width=1946",name:"poop ğŸ’©",price:10,quantity:10}
];

const ADMIN_PASSWORD="admin123";

let stickers=JSON.parse(localStorage.getItem("stickers"))||defaultStickers;
let cart=JSON.parse(localStorage.getItem("cart"))||[];

const cartDiv=document.getElementById("cart");
const cartCount=document.getElementById("cart-count");
const cartItems=document.getElementById("cart-items");
const cartTotal=document.getElementById("cart-total");
const productList=document.getElementById("product-list");
const adminSection=document.getElementById("admin-section");
const adminStickerList=document.getElementById("admin-sticker-list");
const checkoutModal=document.getElementById("checkout-modal");

function toggleCart(){
cartDiv.style.display=cartDiv.style.display==="block"?"none":"block";
}

function loadStickers(){
productList.innerHTML="";
stickers.forEach((s,i)=>{
const div=document.createElement("div");
div.className="product"+(s.quantity<=0?" out-of-stock":"");
div.innerHTML=`
<img src="${s.image}" width="100%">
<h3>${s.name}</h3>
<p>${s.price} Ø¬Ù†ÙŠÙ‡</p>
<p>Ø§Ù„ÙƒÙ…ÙŠØ©: ${s.quantity}</p>
<button class="add-to-cart" onclick="addToCart(${i})" ${s.quantity<=0?"disabled":""}>Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>`;
productList.appendChild(div);
});
}

function addToCart(i){
if(stickers[i].quantity<=0)return;
cart.push({index:i,name:stickers[i].name,price:stickers[i].price});
stickers[i].quantity--;
save();
}

function removeFromCart(i){
let item=cart.splice(i,1)[0];
stickers[item.index].quantity++;
save();
}

function save(){
localStorage.setItem("stickers",JSON.stringify(stickers));
localStorage.setItem("cart",JSON.stringify(cart));
updateCart();
loadStickers();
loadAdminStickers();
}

function updateCart(){
cartItems.innerHTML="";
let total=0;
cart.forEach((c,i)=>{
total+=+c.price;
cartItems.innerHTML+=`${c.name} - ${c.price} <button class="remove-btn" onclick="removeFromCart(${i})">Ã—</button><br>`;
});
cartTotal.textContent=total;
cartCount.textContent=cart.length;
}

function openCheckout(){
if(cart.length===0){alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ©");return;}
checkoutModal.style.display="flex";
}

function closeCheckout(){
checkoutModal.style.display="none";
}

function sendOrder(){
const name=document.getElementById("customer-name").value;
const phone=document.getElementById("customer-phone").value;
const note=document.getElementById("customer-note").value;

if(!name||!phone){alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„");return;}

let order="Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:%0A";
cart.forEach(c=>order+=`- ${c.name} (${c.price} Ø¬Ù†ÙŠÙ‡)%0A`);
order+=`%0AØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${cartTotal.textContent} Ø¬Ù†ÙŠÙ‡`;
order+=`%0AØ§Ù„Ø§Ø³Ù…: ${name}`;
order+=`%0AØ§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: ${phone}`;
if(note)order+=`%0AÙ…Ù„Ø§Ø­Ø¸Ø©: ${note}`;

window.open(`https://wa.me/201036903621?text=${order}`,"_blank");

cart=[];
save();
closeCheckout();
}

document.getElementById("admin-link").onclick=function(){
let pass=prompt("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:");
if(pass===ADMIN_PASSWORD){
adminSection.style.display="block";
loadAdminStickers();
}else alert("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ØºÙ„Ø·");
};

function loadAdminStickers(){
adminStickerList.innerHTML="";
stickers.forEach((s,i)=>{
adminStickerList.innerHTML+=`
<div class="admin-sticker">
<img src="${s.image}" width="60">
<div>${s.name}<br>${s.price}Ø¬ | ${s.quantity}</div>
<button class="delete-btn" onclick="deleteSticker(${i})">Ø­Ø°Ù</button>
</div>`;
});
}

function deleteSticker(i){
stickers.splice(i,1);
save();
}

document.getElementById("sticker-form").onsubmit=function(e){
e.preventDefault();
if(document.getElementById("admin-password").value!==ADMIN_PASSWORD){
alert("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ØºÙ„Ø·");return;
}
stickers.push({
image:image-url.value,
name:sticker-name.value,
price:sticker-price.value,
quantity:Number(sticker-quantity.value)
});
save();
this.reset();
};

loadStickers();
updateCart();
</script>

</body>
</html>
